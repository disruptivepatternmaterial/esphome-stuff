// Calculate PM2.5 US AQI
int pm25_to_aqi_us(int pm25) {
  if      (pm25 <= 12.0) return ((50.0 - 0.0) / (12.0 - 0.0) * (pm25 - 0.0) + 0.0);
  else if (pm25 <= 35.4) return ((100.0 - 50.0) / (35.4 - 12.0) * (pm25 - 12.0) + 50.0);
  else if (pm25 <= 55.4) return ((150.0 - 100.0) / (55.4 - 35.4) * (pm25 - 35.4) + 100.0);
  else if (pm25 <= 150.4) return ((200.0 - 150.0) / (150.4 - 55.4) * (pm25 - 55.4) + 150.0);
  else if (pm25 <= 250.4) return ((300.0 - 200.0) / (250.4 - 150.4) * (pm25 - 150.4) + 200.0);
  else if (pm25 <= 350.4) return ((400.0 - 300.0) / (350.4 - 250.4) * (pm25 - 250.4) + 300.0);
  else if (pm25 <= 500.4) return ((500.0 - 400.0) / (500.4 - 350.4) * (pm25 - 350.4) + 400.0);
  else return 0.0;
};

// Calculate PM10.0 US AQI
int pm100_to_aqi_us(int pm100) {
  if      (pm100 <= 54.0) return ((50.0 - 0.0) / (54.0 - 0.0) * (pm100 - 0.0) + 0.0);
  else if (pm100 <= 154.0) return ((100.0 - 50.0) / (154.0 - 55.0) * (pm100 - 55.0) + 50.0);
  else if (pm100 <= 254.0) return ((150.0 - 100.0) / (254.0 - 155.0) * (pm100 - 155.0) + 100.0);
  else if (pm100 <= 354.0) return ((200.0 - 150.0) / (354.0 - 255.0) * (pm100 - 225.0) + 150.0);
  else if (pm100 <= 424.0) return ((300.0 - 200.0) / (424.0 - 355.0) * (pm100 - 355.0) + 200.0);
  else if (pm100 <= 504.0) return ((400.0 - 300.0) / (504.0 - 425.0) * (pm100 - 425.0) + 300.0);
  else if (pm100 <= 604.0) return ((500.0 - 400.0) / (604.0 - 505.0) * (pm100 - 505.0) + 400.0);
  else return 0.0;
};

// Calculate PM2.5 US EPA SMOKE AQI
int pm25_to_aqi_us_epa(float pm25, float humidity) {
  pm25 = 0.52 * pm25 - (0.085 * humidity) + 5.71;

  if      (pm25 <= 12.0) return ((50.0 - 0.0) / (12.0 - 0.0) * (pm25 - 0.0) + 0.0);
  else if (pm25 <= 35.4) return ((100.0 - 50.0) / (35.4 - 12.0) * (pm25 - 12.0) + 50.0);
  else if (pm25 <= 55.4) return ((150.0 - 100.0) / (55.4 - 35.4) * (pm25 - 35.4) + 100.0);
  else if (pm25 <= 150.4) return ((200.0 - 150.0) / (150.4 - 55.4) * (pm25 - 55.4) + 150.0);
  else if (pm25 <= 250.4) return ((300.0 - 200.0) / (250.4 - 150.4) * (pm25 - 150.4) + 200.0);
  else if (pm25 <= 350.4) return ((400.0 - 300.0) / (350.4 - 250.4) * (pm25 - 250.4) + 300.0);
  else if (pm25 <= 500.4) return ((500.0 - 400.0) / (500.4 - 350.4) * (pm25 - 350.4) + 400.0);
  else return 0.0;
};